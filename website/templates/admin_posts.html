{% extends "base.html" %} {% block title %}Admin Filter{% endblock %}
{% block content %}
<h1>Moderation Queue</h1>
<br>
{% for post in posts %}

<div class="card" style="margin-bottom: 20px;">
    <div class="card-header d-flex justify-content-between align-items-center">
        <a href="/posts/{{post.user.username}}">{{post.user.username}}</a>
        {% if post.consent %}
            <a class="fa-regular fa-handshake"></a>
        {% endif %}



        <div>
                            <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.13.0/css/all.css">
            <!--                <div class="likelen">{{ post.likes|length }}</div>-->
            <span id="likes-count-{{post.id}}">
    {{ post.likes|length }}</span>
            {% if user.id in post.likes|map(attribute="author")|list %}
            <a
                    class="fas fa-heart"
                    id="like-button-{{post.id}}"
                    onclick="like({{post.id}})"
            ></a>
            {% else %}
            <a
                    class="far fa-heart"
                    id="like-button-{{post.id}}"
                    onclick="like({{post.id}})"
            ></a>
            {% endif %}
            <!--     <ul class="special">
                <li><a href="/like-post/{{post.id}}" class="icon_class"></a></li>
            </ul>-->

        </div>
    </div>
    <div class="card-body">
        <div href="/posts/{{post.browser}}" class="card-title">{{post.browser}}</div>
        <a href="/posts_sorted/{{post.browser}}">See Other {{post.browser}} Posts <i class="fa-solid fa-arrow-up-right-from-square"></i></a>


    <div class="ex1" >{{ post.text }}</div>




        <br/>
        <div class="collapse" id="comments-{{post.id}}">
               <form class="input-group mb-3 legacy-form" method="POST" action="/create-comment/{{post.id}}">
            <input type="text" id="text" name="text" class="form-control" placeholder="Add a Comment"/>
            <button type="submit" class="btn btn-comment">Comment</button>
        </form>
            <div class="card">
                <div class="card-body" id="comments-expanded-{{post.id}}">
                    {% for comment in post.comments %}
                    <div class="d-flex justify-content-between align-items-center">
                        <div class="comment-text">
                            <a href="/posts/{{comment.user.username}}">{{comment.user.username}}</a>
                             {{comment.text}}
                        </div>
                        <div>

                            {% if user.id == comment.author or user.id == post.author %}
                                <a style="color:blue;" class="fas fa-trash-can" href="/delete-comment/{{comment.id}}"></a>
                            {% endif %}
                        </div>
                    </div>
                    {% endfor %}

                </div>
            </div>

        </div>
        <p class="card-text">
            {% if post.comments|length >= 0 %}
                <small>{{post.comments|length}}</small>
            <a data-bs-toggle="collapse"
                    class="fa-regular fa-comment"
                    href="#comments-{{post.id}}"
            ></a>
            {% else %}
            <small class="text-muted"> No Comments</small>
            {% endif %}
        </p>

    </div>
    <div class="card-footer text-muted">
        {{post.date_created}}
        <div>
            <a style="color:red;"
                    class="fas fa-trash-can"
                    href="/delete-post/{{post.id}}?callback_url=/reported-posts"
            ></a>
            <a style="color:green; margin-left: 10px;"
                    class="fas fa-check"
                    href="/void-reports/{{post.id}}?callback_url=/reported-posts"
            ></a>
        </div>
    </div>

</div>

{% endfor %}
{% endblock %}